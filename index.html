<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cropper</title>

    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="root">
        <main>
            <h1>PROFILER</h1>
            <p>Cliccate sulla foto per spostarla all'interno della cornice, usate l'input range per ridimensionarla</p>
            <div class="flexer">
                <div class="pic-container" @click="disselect">
                    <div class="frame" style="height: 400px; width: 400px;">
                        <img v-if="!preload" src="img/default-user.png" alt="">
                        <img v-else :src="preload" alt="" id="image" class="abs" :style="`width: ${pic_width*size}%; filter: sepia(${sepia}) grayscale(${grayscale}); height:auto; left: ${x}; 
                            top: ${y};`" @mousedown.left="selectPic" @dragstart="movePic(event)">

                        <div class="layover abs" v-if="isPicSelected" @mousemove="move(event)" @mouseup.left="disselect" style="cursor:crosshair"
                            @mouseleave="disselect">
                            <p
                                style="user-select: none; position: relative; top:50%; left: 20%; transform: translate(0,-50%); background-color: rgba(0,0,0,0.5); padding: .4em; width: max-content; color: white; border-radius: 5px">
                                Trascina l'immagine per riposizionarla</p>
                        </div>
                    </div>
                    <label for="upload">Carica immagine</label>
                    <input type="file" name="" id="upload" value="upload" v-on:change="preloadPic($event)">


                </div>
                <div class="tools" v-if="preload">
                    <h2>Occhio che molte di queste su Safari non vengono salvate nella canvas</h2>
                    <ul>
                        <li>
                            <label for="size">Regola dimensioni foto</label>
                            <input type="range" name="size" id="size" min="1" max="2" step="0.1" :value="size"
                                v-model="size">
                        </li>
                        <li>
                            <label for="grayscale">Scala di grigi</label>
                            <input type="range" name="grayscale" id="grayscale" min="0" max="1" step="0.1"
                                :value="grayscale" v-model="grayscale">
                        </li>
                        <li>


                            <label for="sepia">Sepia</label>
                            <input type="range" name="sepia" id="sepia" min="0" max="1" step="0.1"
                                :value="sepia" v-model="sepia">
                        </li>
                    </ul>



                </div>
            </div>
            <div>
                <button @click="savePic">Salva immagine</button>

            </div>


            <canvas id="croppedImage" width="398px" height="398px">

            </canvas>
            <img :src="canvas.toDataURL" alt="">

        </main>
    </div>
    <script src="js/app.js"></script>

</body>

</html>